{"version":3,"sources":["../static/js/19.845f2a89.chunk.js","pages/PDFReport/ReportCategory/CategoryForm.js"],"names":["webpackJsonp","452","module","__webpack_exports__","__webpack_require__","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_dec","_dec2","_class","_class2","_temp2","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_2_react_helmet__","__WEBPACK_IMPORTED_MODULE_4_antd__","__WEBPACK_IMPORTED_MODULE_5_react_redux__","__WEBPACK_IMPORTED_MODULE_6_axiosInst__","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","FormItem","Item","TreeNode","Option","mapStateToProps","_ref","user","app","userState","formItemLayout","labelCol","span","wrapperCol","PDFCategoryPage","_Component","_ref2","_temp","_this","_ret","this","_len","arguments","args","_key","getPrototypeOf","apply","concat","state","loading","reportCategories","selectedNode","loadCategory","setState","get","then","res","data","catch","err","alert","addCategory","e","preventDefault","form","validateFields","post","console","log","updateCategory","put","deleteCategory","delete","categoryId","_id","temp","updateCategoryNode","onCategorySelect","selectedKeys","info","node","dataRef","renderTreeNodes","map","item","children","a","createElement","title","icon","type","assign","array","id","obj","splice","getFieldDecorator","_state","justify","style","width","onSelect","placeholder","dept","o","name","autoExpandParent","showIcon","layout","onSubmit","label","initialValue","rules","required","message","parentId","allowClear","dropdownStyle","maxHeight","overflow","treeData","treeDefaultExpandAll","htmlType","disabled","onClick","onConfirm","okText","cancelText","description","defaultProps","pathName"],"mappings":"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","file":"static/js/19.845f2a89.chunk.js","sourcesContent":["webpackJsonp([19],{\n\n/***/ 452:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_components_LayoutComponents_Page__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_helmet__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_helmet___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react_helmet__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_components_LayoutComponents_CustomCard__ = __webpack_require__(448);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_redux__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_axiosInst__ = __webpack_require__(47);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _dec,_dec2,_class,_class2,_temp2;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var FormItem=__WEBPACK_IMPORTED_MODULE_4_antd__[\"m\" /* Form */].Item;var TreeNode=__WEBPACK_IMPORTED_MODULE_4_antd__[\"E\" /* Tree */].TreeNode;var Option=__WEBPACK_IMPORTED_MODULE_4_antd__[\"x\" /* Select */].Option;var mapStateToProps=function mapStateToProps(_ref,props){var app=_ref.app;var userState=app.userState;return{user:userState};};var formItemLayout={labelCol:{span:6},wrapperCol:{span:14}};var PDFCategoryPage=(_dec=Object(__WEBPACK_IMPORTED_MODULE_5_react_redux__[\"b\" /* connect */])(mapStateToProps),_dec2=__WEBPACK_IMPORTED_MODULE_4_antd__[\"m\" /* Form */].create(),_dec(_class=_dec2(_class=(_temp2=_class2=function(_Component){_inherits(PDFCategoryPage,_Component);function PDFCategoryPage(){var _ref2;var _temp,_this,_ret;_classCallCheck(this,PDFCategoryPage);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref2=PDFCategoryPage.__proto__||Object.getPrototypeOf(PDFCategoryPage)).call.apply(_ref2,[this].concat(args))),_this),_this.state={loading:false,reportCategories:[],selectedNode:null},_this.loadCategory=function(value){_this.setState({loading:true});__WEBPACK_IMPORTED_MODULE_6_axiosInst__[\"a\" /* default */].get('api/pdf/category/'+value).then(function(res){res.data=res.data===''?[]:res.data;_this.setState({loading:false,reportCategories:res.data});}).catch(function(err){alert(err);});},_this.addCategory=function(e){e.preventDefault();_this.props.form.validateFields(function(err,value){if(!err){_this.setState({loading:true});__WEBPACK_IMPORTED_MODULE_6_axiosInst__[\"a\" /* default */].post('/api/pdf/category/add',value).then(function(res){_this.setState({loading:false,reportCategories:res.data});}).catch(function(err){console.log(err);});}});},_this.updateCategory=function(){_this.props.form.validateFields(function(err,value){if(!err){_this.setState({loading:true});__WEBPACK_IMPORTED_MODULE_6_axiosInst__[\"a\" /* default */].put('/api/pdf/category/update',value).then(function(res){_this.setState({loading:false,reportCategories:res.data});}).catch(function(err){console.log(err);});}});},_this.deleteCategory=function(){console.log(_this.state.selectedNode);if(_this.state.selectedNode){__WEBPACK_IMPORTED_MODULE_6_axiosInst__[\"a\" /* default */].delete('/api/pdf/category/delete',{data:{categoryId:_this.state.selectedNode._id}}).then(function(res){var temp=[].concat(_toConsumableArray(_this.state.reportCategories));_this.updateCategoryNode(temp,res.data._id);_this.setState({reportCategories:temp});}).catch(function(err){});}},_this.onCategorySelect=function(selectedKeys,info){_this.setState({selectedNode:info.node.props.dataRef?info.node.props.dataRef:info.node.props});},_this.renderTreeNodes=function(data){return data.map(function(item){if(item.children){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(TreeNode,{title:item.title,key:item.key,dataRef:item,icon:__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"n\" /* Icon */],{type:'folder'})},_this.renderTreeNodes(item.children));}return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(TreeNode,Object.assign({},item,{icon:__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"n\" /* Icon */],{type:'folder'})}));});},_this.updateCategoryNode=function(array,id){for(var i=0;i<array.length;++i){var obj=array[i];if(obj._id===id){// splice out 1 element starting at position i\narray.splice(i,1);return true;}if(obj.children){if(_this.updateCategoryNode(obj.children,id)){if(obj.children.length===0){// delete children property when empty\ndelete obj.children;// or, to delete this parent altogether\n// as a result of it having no more children\n// do this instead\n//array.splice(i, 1);\n}return true;}}}},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(PDFCategoryPage,[{key:'componentDidMount',value:function componentDidMount(){}},{key:'render',value:function render(){var props=Object.assign({},this.props);var user=this.props.user;var getFieldDecorator=this.props.form.getFieldDecorator;var _state=this.state,loading=_state.loading,reportCategories=_state.reportCategories,selectedNode=_state.selectedNode;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"w\" /* Row */],{type:'flex',justify:'start'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"h\" /* Col */],{span:5},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"g\" /* Card */],{title:'Category List',style:{width:'90%'}},!loading?__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('span',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"x\" /* Select */],{style:{width:'100%'},onSelect:this.loadCategory,placeholder:'Select dept'},user.dept.length>0?user.dept.map(function(o){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Option,{key:o._id,value:o._id},o.name);}):null),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"E\" /* Tree */],{autoExpandParent:true,showIcon:true,onSelect:this.onCategorySelect},reportCategories?this.renderTreeNodes(reportCategories):null)):__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"y\" /* Spin */],null))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"h\" /* Col */],{span:10},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"m\" /* Form */],{layout:'horizontal',onSubmit:this.addCategory},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,{label:''},getFieldDecorator('categoryId',{initialValue:selectedNode?selectedNode._id:''})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"o\" /* Input */],{type:'hidden'}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({label:'Department'},formItemLayout),getFieldDecorator('dept',{rules:[{required:true,message:'Please select department to report!'}],initialValue:selectedNode?selectedNode.dept._id:''})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"x\" /* Select */],{style:{width:'100%'}},user.dept.length>0?user.dept.map(function(o){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Option,{key:o._id,value:o._id},o.name);}):null))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({label:'Category Name'},formItemLayout),getFieldDecorator('categoryName',{rules:[{required:true,message:'Please input report category name!'}],initialValue:selectedNode?selectedNode.title:''})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"o\" /* Input */],null))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,Object.assign({label:'Parent Category'},formItemLayout),getFieldDecorator('parentId',{initialValue:selectedNode?selectedNode.parentId:''})(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"F\" /* TreeSelect */],{allowClear:true,style:{width:'100%'},dropdownStyle:{maxHeight:400,overflow:'auto'},treeData:reportCategories,treeDefaultExpandAll:true}))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(FormItem,null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"e\" /* Button */],{type:'primary',htmlType:'submit',loading:loading},'Add'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"k\" /* Divider */],{type:'vertical'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"e\" /* Button */],{type:'success',loading:loading,disabled:selectedNode?false:true,onClick:this.updateCategory},'Update'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"k\" /* Divider */],{type:'vertical'}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"v\" /* Popconfirm */],{title:'Are you sure delete?',onConfirm:this.deleteCategory,okText:'Yes',cancelText:'No'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"e\" /* Button */],{type:'danger',loading:loading,disabled:selectedNode?false:true},'Delete')))),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_4_antd__[\"a\" /* Alert */],{message:'Warning',description:'If deleting a category, all reports in category will be deleted too.',type:'warning',showIcon:true})));}}]);return PDFCategoryPage;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]),_class2.defaultProps={pathName:'PDF Report Category'},_temp2))||_class)||_class);/* harmony default export */ __webpack_exports__[\"default\"] = (PDFCategoryPage);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/19.845f2a89.chunk.js","import React, { Component } from 'react'\r\nimport Page from 'components/LayoutComponents/Page'\r\nimport Helmet from 'react-helmet'\r\nimport CustomCard from 'components/LayoutComponents/CustomCard'\r\nimport {\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Row,\r\n  Col,\r\n  TreeSelect,\r\n  Tree,\r\n  Icon,\r\n  Spin,\r\n  Divider,\r\n  Card,\r\n  Popconfirm,\r\n  Alert,\r\n  Select,\r\n} from 'antd'\r\nimport { connect } from 'react-redux'\r\n\r\nimport axios from 'axiosInst'\r\n\r\nconst FormItem = Form.Item\r\nconst TreeNode = Tree.TreeNode\r\nconst Option = Select.Option\r\n\r\nconst mapStateToProps = ({ app }, props) => {\r\n  const { userState } = app\r\n  return {\r\n    user: userState,\r\n  }\r\n}\r\n\r\nconst formItemLayout = {\r\n  labelCol: { span: 6 },\r\n  wrapperCol: { span: 14 },\r\n}\r\n\r\n@connect(mapStateToProps)\r\n@Form.create()\r\nclass PDFCategoryPage extends Component {\r\n  state = {\r\n    loading: false,\r\n    reportCategories: [],\r\n    selectedNode: null,\r\n  }\r\n  static defaultProps = {\r\n    pathName: 'PDF Report Category',\r\n  }\r\n\r\n  componentDidMount() {}\r\n\r\n  loadCategory = value => {\r\n    this.setState({ loading: true })\r\n    axios\r\n      .get(`api/pdf/category/${value}`)\r\n      .then(res => {\r\n        res.data = res.data === '' ? [] : res.data\r\n        this.setState({ loading: false, reportCategories: res.data })\r\n      })\r\n      .catch(err => {\r\n        alert(err)\r\n      })\r\n  }\r\n\r\n  addCategory = e => {\r\n    e.preventDefault()\r\n    this.props.form.validateFields((err, value) => {\r\n      if (!err) {\r\n        this.setState({ loading: true })\r\n        axios\r\n          .post('/api/pdf/category/add', value)\r\n          .then(res => {\r\n            this.setState({ loading: false, reportCategories: res.data })\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n  updateCategory = () => {\r\n    this.props.form.validateFields((err, value) => {\r\n      if (!err) {\r\n        this.setState({ loading: true })\r\n        axios\r\n          .put('/api/pdf/category/update', value)\r\n          .then(res => {\r\n            this.setState({ loading: false, reportCategories: res.data })\r\n          })\r\n          .catch(err => {\r\n            console.log(err)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteCategory = () => {\r\n    console.log(this.state.selectedNode)\r\n    if (this.state.selectedNode) {\r\n      axios\r\n        .delete('/api/pdf/category/delete', { data: { categoryId: this.state.selectedNode._id } })\r\n        .then(res => {\r\n          let temp = [...this.state.reportCategories]\r\n          this.updateCategoryNode(temp, res.data._id)\r\n          this.setState({ reportCategories: temp })\r\n        })\r\n        .catch(err => {})\r\n    }\r\n  }\r\n\r\n  onCategorySelect = (selectedKeys, info) => {\r\n    this.setState({\r\n      selectedNode: info.node.props.dataRef ? info.node.props.dataRef : info.node.props,\r\n    })\r\n  }\r\n\r\n  renderTreeNodes = data => {\r\n    return data.map(item => {\r\n      if (item.children) {\r\n        return (\r\n          <TreeNode title={item.title} key={item.key} dataRef={item} icon={<Icon type=\"folder\" />}>\r\n            {this.renderTreeNodes(item.children)}\r\n          </TreeNode>\r\n        )\r\n      }\r\n      return <TreeNode {...item} icon={<Icon type=\"folder\" />} />\r\n    })\r\n  }\r\n\r\n  updateCategoryNode = (array, id) => {\r\n    for (var i = 0; i < array.length; ++i) {\r\n      var obj = array[i]\r\n      if (obj._id === id) {\r\n        // splice out 1 element starting at position i\r\n        array.splice(i, 1)\r\n        return true\r\n      }\r\n      if (obj.children) {\r\n        if (this.updateCategoryNode(obj.children, id)) {\r\n          if (obj.children.length === 0) {\r\n            // delete children property when empty\r\n            delete obj.children\r\n\r\n            // or, to delete this parent altogether\r\n            // as a result of it having no more children\r\n            // do this instead\r\n            //array.splice(i, 1);\r\n          }\r\n          return true\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const props = { ...this.props }\r\n    const { user } = this.props\r\n    const { getFieldDecorator } = this.props.form\r\n    const { loading, reportCategories, selectedNode } = this.state\r\n    return (\r\n      <Row type=\"flex\" justify=\"start\">\r\n        <Col span={5}>\r\n          <Card title=\"Category List\" style={{ width: '90%' }}>\r\n            {!loading ? (\r\n              <span>\r\n                <Select\r\n                  style={{ width: '100%' }}\r\n                  onSelect={this.loadCategory}\r\n                  placeholder=\"Select dept\"\r\n                >\r\n                  {user.dept.length > 0\r\n                    ? user.dept.map(o => {\r\n                        return (\r\n                          <Option key={o._id} value={o._id}>\r\n                            {o.name}\r\n                          </Option>\r\n                        )\r\n                      })\r\n                    : null}\r\n                </Select>\r\n                <Tree autoExpandParent={true} showIcon={true} onSelect={this.onCategorySelect}>\r\n                  {reportCategories ? this.renderTreeNodes(reportCategories) : null}\r\n                </Tree>\r\n              </span>\r\n            ) : (\r\n              <Spin />\r\n            )}\r\n          </Card>\r\n        </Col>\r\n        <Col span={10}>\r\n          <Form layout=\"horizontal\" onSubmit={this.addCategory}>\r\n            <FormItem label=\"\">\r\n              {getFieldDecorator('categoryId', {\r\n                initialValue: selectedNode ? selectedNode._id : '',\r\n              })(<Input type=\"hidden\" />)}\r\n            </FormItem>\r\n            <FormItem label=\"Department\" {...formItemLayout}>\r\n              {getFieldDecorator('dept', {\r\n                rules: [{ required: true, message: 'Please select department to report!' }],\r\n                initialValue: selectedNode ? selectedNode.dept._id : '',\r\n              })(\r\n                <Select style={{ width: '100%' }}>\r\n                  {user.dept.length > 0\r\n                    ? user.dept.map(o => {\r\n                        return (\r\n                          <Option key={o._id} value={o._id}>\r\n                            {o.name}\r\n                          </Option>\r\n                        )\r\n                      })\r\n                    : null}\r\n                </Select>,\r\n              )}\r\n            </FormItem>\r\n            <FormItem label=\"Category Name\" {...formItemLayout}>\r\n              {getFieldDecorator('categoryName', {\r\n                rules: [{ required: true, message: 'Please input report category name!' }],\r\n                initialValue: selectedNode ? selectedNode.title : '',\r\n              })(<Input />)}\r\n            </FormItem>\r\n            <FormItem label=\"Parent Category\" {...formItemLayout}>\r\n              {getFieldDecorator('parentId', {\r\n                initialValue: selectedNode ? selectedNode.parentId : '',\r\n              })(\r\n                <TreeSelect\r\n                  allowClear={true}\r\n                  style={{ width: '100%' }}\r\n                  dropdownStyle={{ maxHeight: 400, overflow: 'auto' }}\r\n                  treeData={reportCategories}\r\n                  treeDefaultExpandAll\r\n                />,\r\n              )}\r\n            </FormItem>\r\n            <FormItem>\r\n              <Button type=\"primary\" htmlType=\"submit\" loading={loading}>\r\n                Add\r\n              </Button>\r\n              <Divider type=\"vertical\" />\r\n              <Button\r\n                type=\"success\"\r\n                loading={loading}\r\n                disabled={selectedNode ? false : true}\r\n                onClick={this.updateCategory}\r\n              >\r\n                Update\r\n              </Button>\r\n              <Divider type=\"vertical\" />\r\n              <Popconfirm\r\n                title=\"Are you sure delete?\"\r\n                onConfirm={this.deleteCategory}\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n              >\r\n                <Button type=\"danger\" loading={loading} disabled={selectedNode ? false : true}>\r\n                  Delete\r\n                </Button>\r\n              </Popconfirm>\r\n            </FormItem>\r\n          </Form>\r\n          <Alert\r\n            message=\"Warning\"\r\n            description=\"If deleting a category, all reports in category will be deleted too.\"\r\n            type=\"warning\"\r\n            showIcon\r\n          />\r\n        </Col>\r\n      </Row>\r\n    )\r\n  }\r\n}\r\n\r\nexport default PDFCategoryPage\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/PDFReport/ReportCategory/CategoryForm.js"],"sourceRoot":""}